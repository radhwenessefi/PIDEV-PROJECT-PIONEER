<div>
  <div class="flex flex-col md:flex-row" *ngIf="cart.length">
    <div class="w-full md:w-2/3" [@animate]="{value:'*',params:{delay: '100ms', x:'-50px'}}">
      <mat-card class="mb-4 p-4">
        <h5 class="text-md font-bold !mb-3">
          Billing address
        </h5>
        <form [formGroup]="checkoutForm">
          <div class="flex flex-wrap flex-col md:flex-row">
            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <mat-select placeholder="Country" [formControl]="checkoutForm.controls['country']">
                  <mat-option *ngFor="let c of countries" [value]="c.code">
                    {{ c.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="First name" value="" [formControl]="checkoutForm.controls['firstName']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Last name" value="" [formControl]="checkoutForm.controls['lastName']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Company" value="" [formControl]="checkoutForm.controls['company']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Address line 1" value="" [formControl]="checkoutForm.controls['address1']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Address line 2" value="" [formControl]="checkoutForm.controls['address2']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="City" [formControl]="checkoutForm.controls['city']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput type="number" placeholder="Zip" [formControl]="checkoutForm.controls['zip']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Phone" [formControl]="checkoutForm.controls['phone']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Email" [formControl]="checkoutForm.controls['email']">
              </mat-form-field>
            </div>

          </div>
        </form>
      </mat-card>
      <div class="ml-3 my-6 flex flex-col">
        <mat-checkbox class="mr-3">Create an account</mat-checkbox>
        <mat-checkbox [(ngModel)]="hasAltAddress">Alternative shipping address</mat-checkbox>
      </div>
      <mat-card class="mt-4 p-4" *ngIf="hasAltAddress" [@animate]="{value:'*',params:{delay:'100ms',y:'50px'}}">

        <h5 class="text-md font-bold !mb-3">
          Shipping address
        </h5>
        <form [formGroup]="checkoutFormAlt">
          <div class="flex flex-wrap flex-col md:flex-row">
            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <mat-select placeholder="Country" [formControl]="checkoutFormAlt.controls['country']">
                  <mat-option *ngFor="let c of countries" [value]="c.code">
                    {{ c.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="First name" value="" [formControl]="checkoutFormAlt.controls['firstName']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Last name" value="" [formControl]="checkoutFormAlt.controls['lastName']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Company" value="" [formControl]="checkoutFormAlt.controls['company']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Address line 1" value=""
                  [formControl]="checkoutFormAlt.controls['address1']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Address line 2" value=""
                  [formControl]="checkoutFormAlt.controls['address2']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="City" [formControl]="checkoutFormAlt.controls['city']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput type="number" placeholder="Zip" [formControl]="checkoutFormAlt.controls['zip']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Phone" [formControl]="checkoutFormAlt.controls['phone']">
              </mat-form-field>
            </div>

            <div class="pr-16 w-full md:w-1/2">
              <mat-form-field class="full-width">
                <input matInput placeholder="Email" [formControl]="checkoutFormAlt.controls['email']">
              </mat-form-field>
            </div>

          </div>
        </form>
      </mat-card>
    </div>

    <div class="w-full md:w-1/3" [@animate]="{value:'*',params:{delay: '100ms', x:'50px'}}">
      <mat-card class="p-4">
        <h5 class="text-md font-bold !mb-3">
          Your order
        </h5>
        <mat-divider></mat-divider>
        <mat-list class="compact-list mb-4">
          <mat-list-item class="" *ngFor="let p of cart">
            <img mat-list-avatar class="mr-4 rtl:ml-4" [src]="p.product.photo" alt="">
            <div class="flex w-full">
              <h6 class="m-0 mr-4 rtl:ml-4 text-muted">
                <small>{{p.product.name}} x {{p.data.quantity}}</small>
              </h6>
              <span class="flex-grow"></span>
              <div class="text-muted">{{p.product.price.sale * p.data.quantity | currency }}</div>
            </div>
            <mat-divider></mat-divider>
          </mat-list-item>

          <mat-list-item>

            <div class="flex w-full">
              <h6 class="m-0 mr-4 rtl:ml-4 text-muted">
                <small>
                  <strong>Subtotal:</strong>
                </small>
              </h6>
              <span class="flex-grow"></span>
              <div class="text-muted">{{subTotal | currency}}</div>
            </div>
            <mat-divider></mat-divider>
          </mat-list-item>

          <mat-list-item>

            <div class="flex w-full">
              <h6 class="m-0 mr-4 rtl:ml-4 text-muted">
                <small>
                  <strong>Vat:</strong>
                </small>
              </h6>
              <span class="flex-grow"></span>
              <div class="text-muted">{{vat}}%</div>
            </div>
            <mat-divider></mat-divider>
          </mat-list-item>

          <mat-list-item>

            <div class="flex w-full">
              <h6 class="m-0 mr-4 rtl:ml-4 text-muted">
                <small>
                  <strong>Shipping:</strong>
                </small>
              </h6>
              <span class="flex-grow"></span>
              <div class="text-muted">{{shipping}}</div>
            </div>
            <mat-divider></mat-divider>
          </mat-list-item>

          <mat-list-item>

            <div class="flex w-full">
              <h6 class="m-0 mr-4 rtl:ml-4 text-muted">
                <small>
                  <strong>Total:</strong>
                </small>
              </h6>
              <span class="flex-grow"></span>
              <div class="text-muted">{{total | currency}}</div>
            </div>
          </mat-list-item>
        </mat-list>

        <div class="py-1 mb-4">
          <mat-radio-group class="flex flex-col" [(ngModel)]="paymentMethod">
            <mat-radio-button value="paypal" class="mb-1">Paypal</mat-radio-button>

            <mat-radio-button value="card" class="mb-1">Credit Card</mat-radio-button>

            <mat-radio-button value="bank" class="mb-1">Bank Transfer</mat-radio-button>
          </mat-radio-group>
        </div>
        <div class="flex px-2">
          <button mat-raised-button color="primary" (click)="placeOrder()">Place Order</button>
          <span class="flex-grow"></span>
          <button mat-button routerLink="/shop/cart">Back to Cart</button>
        </div>
      </mat-card>
    </div>
  </div>

  <div *ngIf="!cart.length" [@animate]="{value:'*',params:{delay: '100ms', y:'-50px'}}">
    <mat-card class="text-center p-4">
      <div class="">
        <h5 class="mb-4">Your cart is empty</h5>
        <button mat-raised-button color="accent" routerLink="/shop"><mat-icon>chevron_left</mat-icon> Back to
          Shop</button>
      </div>
    </mat-card>
  </div>
</div>